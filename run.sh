#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –ú–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á

echo "=========================================="
echo "  –ó–∞–ø—É—Å–∫ –ú–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á"
echo "=========================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Python
if ! command -v python3 &> /dev/null
then
    echo "‚ùå Python 3 –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.7 –∏–ª–∏ –≤—ã—à–µ"
    exit 1
fi

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Ä—Å–∏—é Python
echo "‚úì –ù–∞–π–¥–µ–Ω Python: $(python3 --version)"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è tkcalendar
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
if ! python3 -c "import tkcalendar" &> /dev/null; then
    echo "‚ö†Ô∏è  tkcalendar –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º tkcalendar –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è..."
    python3 -m pip install tkcalendar
    if [ $? -eq 0 ]; then
        echo "‚úì tkcalendar —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ"
    else
        echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å tkcalendar"
        echo "   –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è"
        echo "   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é: pip install tkcalendar"
    fi
else
    echo "‚úì tkcalendar —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd "$(dirname "$0")/todo_app"

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
echo ""
python3 main_gui.py

# –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞
if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
    echo ""
    read -p "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞..."
fi
